<% provide(:title, 'The Wall') %>
<div class="row">
  <div class="span8">
    <% if @wallposts.any? %>
      <% @wallposts.each do |post| %>
        <% @user = User.find(post.user_id) %>
	<span class="timestamp">
	<%= @user.name %> posted <%= time_ago_in_words(post.created_at) %> ago:
	</span>
	<span class="content">
        <%= post.content %>
	</span>
	<span><a href="wallposts/<%= post.id %>/new"> // Reply</a></span></br>
	<%= recursive_wallposts(post.id).html_safe %>
	<div class="span12">
          </br>
	</div>
      <% end %>
    <% end %>
    <%= will_paginate @wallposts %>
  </div>
  <% if signed_in? %>
  <div class="span8">
    <%= form_for(@wallpost) do |f| %>
      <%= render 'shared/error_messages', object: f.object %>
      <div class="field">
	<%= f.text_area :content, placeholder: "Compose new post" %>
      </div>
      <%= f.submit "Post", class: "btn btn-large btn-primary" %>
    <% end %>
  </div>
  <% end %>
</div>
